Bilbo and the Dwarves watch from the Lonely Mountain as the dragon Smaug sets Laketown ablaze. Bard the Bowman breaks out of prison, and eventually kills Smaug with the black arrow brought to him by his son Bain. Smaug's falling body crushes the fleeing Master of Laketown, who was escaping Laketown on a boat laden with the town's gold. Bard reluctantly becomes the new leader of the people of Laketown, as they seek refuge in the ruins of Dale, while Legolas travels to investigate Mount Gundabad with Tauriel. Thorin, now struck with "dragon sickness" over the vast treasure in the mountain, searches obsessively for the Arkenstone, which Bilbo had previously found but kept hidden. Thorin, hearing that Laketown survivors have fled to Dale, orders the entrance of the Lonely Mountain sealed off.

Meanwhile, Galadriel, Elrond and Saruman arrive at Dol Guldur and free Gandalf, sending him to safety with Radagast. They battle and defeat the Nazgul and Sauron himself, banishing them to the East. Azog, marching on Erebor with his vast Orc army, sends Bolg to Gundabad to summon their second army. Legolas and Tauriel witness the march of Bolg's army, bolstered by Orc Berserkers and giant bats.

Thranduil and an elf army arrive in Dale and form an alliance with Bard in order to re-claim white gems that are part of the Mountain treasure. Bard goes to the mountain and asks Thorin for the share of gold that he had previously promised the people of Laketown, but Thorin refuses. Gandalf arrives at Dale to warn Bard and Thranduil of the threat posed by Azog, but Thranduil dismisses him. Bilbo sneaks out of Erebor to hand the Arkenstone over to Thranduil and Bard, so that they can trade it for the gems and gold they were promised and prevent a battle. When Bard and Thranduil's armies gather at the gates of Erebor, offering to trade the Arkenstone for the Elven white gems and the portion of gold promised Laketown survivors, Thorin angrily refuses to believe they have the Arkenstone until Bilbo admits giving it away and chides Thorin for letting greed cloud his judgement. Outraged by what he sees as betrayal, Thorin nearly kills Bilbo, but Gandalf arrives at the gate and shames Thorin into releasing Bilbo. Thorin's cousin Dain arrives with his Dwarf army, and a battle of Dwarves against Elves and Men begins, with the Elves and Men having a significant advantage. Wereworms emerge from the ground, releasing Azog's army from their tunnels. With the Orcs outnumbering Dain's army, Thranduil and Bard's forces, along with Gandalf and Bilbo, join the battle. However, a second front is opened when many Orcs, Ogres, and Trolls attack Dale.

Inside Erebor, Thorin suffers traumatic hallucinations before regaining his sanity and leading his company to join the battle. He rides towards Ravenhill with Dwalin, Fili and Kili to kill Azog; Bilbo follows them using the One Ring to move through the combat unseen. Meanwhile, Tauriel leaves with Legolas following her to warn the Dwarves of Bolg's approaching army. Fili and Kili are cornered. Azog kills Fili, as Bilbo and the other Dwarves look on. As Thorin engages Azog in a fight to the death, Bolg knocks Bilbo unconscious, overpowers Tauriel and then kills Kili, who had come to her aid. Legolas battles Bolg and eventually kills him. Thorin kills Azog, but is fatally wounded in the process. The Great Eagles then arrive with Radagast and Beorn to fight the newly arriving Orc army, and the Orcs are finally defeated. Bilbo regains consciousness and makes peace with Thorin before he dies. Tauriel mourns Kili and Thranduil acknowledges their love. Legolas then tells Thranduil he must leave, and Thranduil advises him to seek out a Dunedain ranger in the north who goes by the name "Strider". Thorin, Fili and Kili are respectfully laid to rest and Dain is crowned King under the Mountain.

Bilbo bids farewell to the remaining members of Thorin's company and journeys home to the Shire with Gandalf. As the two part ways on the outskirts of the Shire, Gandalf admits his knowledge of Bilbo's ring and warns him that magic rings are not to be used lightly. Bilbo returns to Bag End to find his belongings being auctioned off by his least favourite relatives, the Sackville-Bagginses, because he was presumed dead. He aborts the sale, but finds his home pillaged. He starts to tidy up and takes the Ring out of his pocket.

Sixty years later, on his 111th birthday, Bilbo receives a visit from Gandalf, initiating the events of The Fellowship of the Ring.